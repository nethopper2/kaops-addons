global:
  extraEnvVarsCM: shared-configmap-rag
  extraEnvVarsSecret: shared-secrets-rag
  googleApplicationCredentialsSecretRef: # user provided
  postgresql:
    auth:
      username: postgres
      existingSecret: postgresql-password
      secretKeys:
        adminPasswordKey: postgresPassword
  llmBaseUrl: http://open-webui-ollama:11434
dataIngestion:
  enabled: false
  config:
    dataSourcesUrl:
    overideWebSocketUrl:
    dataIngestionCredentialsRef:
ingress:
  enabled: true
  class: nginx
  oauthProviderName:
  oauth2Proxy:
    enabled: true
    adminEmail: "admin@nethopper.io"
  annotations:
    cert-manager.io/cluster-issuer: letsencrypt-prod
    kubernetes.io/tls-acme: "true"
    nginx.ingress.kubernetes.io/backend-protocol: http
    nginx.ingress.kubernetes.io/force-ssl-redirect: "true"
    nginx.ingress.kubernetes.io/ssl-redirect: "true"
    nginx.ingress.kubernetes.io/tls-acme: "true"
  host:
  additionalHosts: []
  tls:
    - hosts:
open-webui:
  image:
    repository: nethopper/kaops-open-webui
    tag: 0.6.25-alpha.11 # This should match the appVersion in Chart.yaml
    pullPolicy: Always
  ollama:
    persistentVolume:
      enabled: true
    ollama:
      gpu:
        enabled: false
      models:
        pull: []
    service:
      type: ClusterIP
  extraEnvFrom:
    - configMapRef:
        name: shared-configmap-rag
  extraEnvVars:
    - name: WEBUI_NAME
      value: "Private AI"
    - name: ENABLE_CODE_EXECUTION
      value: "false"
    - name: ENABLE_CODE_INTERPRETER
      value: "false"
    - name: ENABLE_EVALUATION_ARENA_MODELS
      value: "false"
    - name: ENABLE_GOOGLE_DRIVE_INTEGRATION
      value: "true"
    - name: ENABLE_ONEDRIVE_INTEGRATION
      value: "true"
    - name: BYPASS_EMBEDDING_AND_RETRIEVAL
      value: "true"
    - name: BYPASS_MODEL_ACCESS_CONTROL
      value: "true"
    - name: USER_PERMISSIONS_WORKSPACE_KNOWLEDGE_ACCESS
      value: "true"
    - name: USER_PERMISSIONS_CHAT_CONTROLS
      value: "false"
    - name: USER_PERMISSIONS_WORKSPACE_PROMPTS_ACCESS
      value: "true"
    - name: WEBUI_AUTH
      value: "true"
    - name: API_KEY_ALLOWED_ENDPOINTS
      value: /api/v1/knowledge/,/api/v1/knowledge/list
    - name: WEBUI_SECRET_KEY
      valueFrom:
        secretKeyRef:
          name: shared-secrets-rag
          key: JWT_SECRET_KEY
    - name: DATABASE_URL
      valueFrom:
        secretKeyRef:
          name: shared-secrets-rag
          key: DATABASE_URL
private-ai-rest:
  sharedConfigMap: shared-configmap-rag
  sharedSecrets: shared-secrets-rag
  postgresql:
    database: private-ai-rest
  image:
    pullPolicy: Always
  ingress:
    enabled: true
    annotations:
      cert-manager.io/cluster-issuer: letsencrypt-prod
      kubernetes.io/ingress.class: nginx
      kubernetes.io/tls-acme: "true"
      nginx.ingress.kubernetes.io/backend-protocol: http
      nginx.ingress.kubernetes.io/force-ssl-redirect: "true"
      nginx.ingress.kubernetes.io/ssl-redirect: "true"
      nginx.ingress.kubernetes.io/tls-acme: "true"
    hosts:
      - host: # system provided
        paths:
          - path: /
            pathType: ImplementationSpecific
    tls:
      - secretName: private-ai-rest-tls
        hosts: # system provided
  config:
    postgresHost: # system provided
    postgresSecret: # system provided
postgresql:
  metrics:
    enabled: true
    serviceMonitor:
      enabled: true
      labels:
        release: # system provided
  primary:
    initdb:
      scripts:
        01-init.sql: |
          CREATE DATABASE "open-webui" WITH OWNER postgres;
          CREATE DATABASE "private-ai-rag" WITH OWNER postgres;
          CREATE DATABASE "private-ai-rest" WITH OWNER postgres;
          CREATE DATABASE "juicefs" WITH OWNER postgres;
rag:
  secretArgocdHook: PreSync
  custom:
    {}
    # logo: # user provided
    # bgImageAuth: # user provided
    # bgMovieAuth: # user provided
    # sector:  # user provided
  apiBaseUrl: # system provided
  dataServiceUrl: # system provided
  allowedCorsOrigin: # system provided
  # googleAllowedExtensions: # user provided
  gcsBucketName: # user provided
  googleApiScopes: # system provided
  postgresHost: # system provided

postInstall:
  chosenPostInstallOptions: ""

backups:
  enabled: false
  schedule: "0 */8 * * *"
  # gcsBucketName: # user provided
  # googleApplicationCredentialsSecretRef: defaults to global.googleApplicationCredentialsSecretRef

nh-rag-api:
  enabled: false
  image:
    repository: nethopper/nh-rag-api
    tag: "v0.0.53"
  env:
    LLAMAINDEX_OLLAMA_BASE_URL: http://open-webui-ollama:11434
    QDRANT_URL: # system provided
  metrics:
    enabled: true
    serviceMonitor:
      enabled: true
      labels:
        release: # system provided
nh-rag-worker:
  enabled: false
  image:
    repository: nethopper/nh-rag-worker
    tag: "v0.0.53"
  env:
    LLAMAINDEX_OLLAMA_BASE_URL: http://open-webui-ollama:11434
    QDRANT_URL: # system provided
nh-rag-api-v2:
  enabled: false
  image:
    repository: nethopper/nh-rag-api
    tag: "v0.0.53"
  env:
    LLAMAINDEX_OLLAMA_BASE_URL: http://open-webui-ollama:11434
    QDRANT_URL: # system provided
  metrics:
    enabled: true
    serviceMonitor:
      enabled: true
      labels:
        release: # system provided
nh-rag-worker-v2:
  enabled: false
  image:
    repository: nethopper/nh-rag-worker
    tag: "v0.0.53"
  env:
    LLAMAINDEX_OLLAMA_BASE_URL: http://open-webui-ollama:11434
    QDRANT_URL: # system provided
redis:
  enabled: false
  architecture: standalone
  auth:
    enabled: false
  master:
    persistence:
      enabled: true
      size: 8Gi
      storageClass: "" # Optionally set your storage class
  replica:
    replicaCount: 0
  metrics:
    enabled: true
    serviceMonitor:
      enabled: true
      additionalLabels:
        release: # system provided

neo4j:
  enabled: false
  disableLookups: true
  auth:
    user: neo4j
  uri: # system provided
  services:
    neo4j:
      enabled: false
    internals:
      enabled: true
  neo4j:
    name: my-standalone
    resources:
      cpu: "0.5"
      memory: "2Gi"
    passwordFromSecret: neo4j-password
  volumes:
    data:
      mode: "dynamic"
      dynamic:
        storageClassName: premium-rwo

qdrant:
  metrics:
    enabled: true
    serviceMonitor:
      enabled: true
      additionalLabels:
        release: # system provided

langfuse:
  enabled: false

ragflow:
  enabled: false

juicefs-s3-gateway:
  enabled: false
  secret:
    name: "juicefs-s3-gateway"
    create: true
    config:
      name: "juicefs-volume"
      storage: "" # user provided
      bucket: "" # user provided
      metaurl: "" # system provided
  metrics:
    enabled: true
    serviceMonitor:
      enabled: true
      additionalLabels:
        release: # system provided

nh-pai-data-service:
  ingress:
    enabled: true
    annotations:
      cert-manager.io/cluster-issuer: letsencrypt-prod
      kubernetes.io/ingress.class: nginx
      kubernetes.io/tls-acme: "true"
      nginx.ingress.kubernetes.io/backend-protocol: http
      nginx.ingress.kubernetes.io/force-ssl-redirect: "true"
      nginx.ingress.kubernetes.io/ssl-redirect: "true"
      nginx.ingress.kubernetes.io/tls-acme: "true"
    hosts:
      - host: # system provided
        paths:
          - path: /
            pathType: ImplementationSpecific
    tls:
      - secretName: nh-pai-data-service-tls
        hosts: # system provided
  enabled: false
  config:
    postgresDatabase: "private-ai-rest"
    juiceFsSecretName: "juicefs-s3-gateway"
    juiceFsUrl: "" # system provided
