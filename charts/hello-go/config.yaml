metadata:
  slug: 'hello-go'
  name: 'Hello Go'
  description: 'A Hello World application written in the Go language. No input parameters.'
  logoUrlDark: 'https://nh-addons.s3.us-east-1.amazonaws.com/hello-go/logo.png'
  logoUrlLight: 'https://nh-addons.s3.us-east-1.amazonaws.com/hello-go/logo.png'
  detailUrl: 'https://addons.kaops.net/hello-go/'
  externalUrl: 'https://github.com/golang-samples/gopher-vector?tab=readme-ov-file'
  installTargets:
    clusterMessage: Enter cluster restrictions and requirements here. Must be installed on clusters configured for Ingress.
    infoMessage: Info message
    warningMessage: The Frontend UX displays this text as an warning message in the cluster Addon config dialog.

forms:
  - slug: default
    label: Configuration
    steps:
      - slug: details
        isCreateOnly: true
        variableSlugs:
          - ssoEnabled
          - gpuEnabled
          - modelsToPull
        ui:
          label: Details
      - slug: postInstall
        isCreateOnly: true
        variableSlugs:
          - postInstallOptions
          - postInstallGroupsSuggested
          - postInstallKnowledgeBasesSuggested
        ui:
          label: Options
      - slug: groups
        isCreateOnly: true
        variableSlugs:
          - postInstallGroupsCustom
        ui:
          if: "$get(postInstallOptions).value == 'custom'"
          label: Groups
      - slug: knowledge
        isCreateOnly: true
        variableSlugs:
          - postInstallKnowledgeBasesCustom
        ui:
          if: "$get(postInstallOptions).value == 'custom'"
          label: Knowledge
  - slug: defaultUpdate
    label: Configuration
variables:
  - slug: ssoEnabled
    path: open-webui.oauth2Proxy.enabled
    forms: [default, defaultUpdate]
    ui:
      type: toggle
      label: Use Single Sign On
      value: false
  - slug: gpuEnabled
    path: open-webui.ollama.ollama.gpu.enabled
    forms: [default]
    ui:
      type: toggle
      label: Use GPU
      help: Install the oAuth2 Proxy Addon to use SSO.
      value: false
  - slug: modelsToPull
    path: open-webui.ollama.ollama.models.pull
    forms: [default]
    ui:
      type: transferlist
      label: Select LLM Models to Pull
      sourceLabel: LLM Models
      options: [gemma2, gemma3:1b, gemma3:4b, llama3.1:8b, llama3.2:3b]
      help: 'Models to pull from: https://ollama.com/search'
      searchable: true
  - slug: postInstallOptions
    path: postInstall.chosenPostInstallOptions
    forms: [default]
    ui:
      el: div
      children:
        - label: Groups and Knowledge bases
          type: radio
          id: postInstallOptions
          name: chosenPostInstallOptions
          options:
            - label: Suggested
              value: suggested
            - label: Custom
              value: custom
            - label: None
              value: none
          value: suggested
          help: You can change the details anytime inside the application itself.
        - if: "$get(postInstallOptions).value == 'suggested'"
          el: div
          children:
            - cmp: QItem
              props:
                dense: true
              children:
                - cmp: QItemSection
                  children:
                    - cmp: QItemLabel
                      children: Engineering Team
                    - cmp: QItemLabel
                      props:
                        caption: true
                      children: A group for software engineers
            - cmp: QItem
              props:
                dense: true
              children:
                - cmp: QItemSection
                  children:
                    - cmp: QItemLabel
                      children: Product Management
                    - cmp: QItemLabel
                      props:
                        caption: true
                      children: A group for product managers
            - cmp: QItem
              props:
                dense: true
              children:
                - cmp: QItemSection
                  children:
                    - cmp: QItemLabel
                      children: Marketing Team
                    - cmp: QItemLabel
                      props:
                        caption: true
                      children: A group for marketing professionals
            - cmp: QItem
              props:
                dense: true
              children:
                - cmp: QItemSection
                  children:
                    - cmp: QItemLabel
                      children: Customer Support
                    - cmp: QItemLabel
                      props:
                        caption: true
                      children: A group for customer support representatives
  - slug: postInstallGroupsSuggested
    path: postInstall.groups
    forms: [default]
    ui:
      if: "$get(postInstallOptions).value == 'suggested'"
      type: list
      children:
        - type: group
          children:
            - type: hidden
              name: name
              value: Engineering Team
            - type: hidden
              name: description
              value: A group for software engineers
        - type: group
          children:
            - type: hidden
              name: name
              value: Product Management
            - type: hidden
              name: description
              value: A group for product managers
        - type: group
          children:
            - type: hidden
              name: name
              value: Marketing Team
            - type: hidden
              name: description
              value: A group for marketing professionals
        - type: group
          children:
            - type: hidden
              name: name
              value: Customer Support
            - type: hidden
              name: description
              value: A group for customer support representatives
  - slug: postInstallGroupsCustom
    path: postInstall.groups
    forms: [default]
    ui:
      type: repeater
      label: Groups
      help: The installation process will automatically create these groups. You can change the names & details anytime inside the application itself.
      children:
        - label: Name
          type: text
          validation: 'required'
        - label: Description
          type: text
          validation: 'required'
  - slug: postInstallKnowledgeBasesSuggested
    path: postInstall.knowledgeBases
    forms: [default]
    ui:
      if: "$get(postInstallOptions).value == 'suggested'"
      type: list
      children:
        - type: group
          children:
            - type: hidden
              name: name
              value: Best Practices for Code Reviews
            - type: hidden
              name: description
              value: This guide outlines the key steps for effective code reviews.
            - type: list
              name: groups
              children:
                - type: hidden
                  value: Engineering Team
        - type: group
          children:
            - type: hidden
              name: name
              value: Social Media Strategy For This Year
            - type: hidden
              name: description
              value: An overview of our social media approach for the upcoming year.
            - type: list
              name: groups
              children:
                - type: hidden
                  value: Marketing Team
        - type: group
          children:
            - type: hidden
              name: name
              value: Agile Project Management Tips
            - type: hidden
              name: description
              value: Key insights for managing agile projects effectively.
            - type: list
              name: groups
              children:
                - type: hidden
                  value: Product Management
        - type: group
          children:
            - type: hidden
              name: name
              value: Handling Difficult Customers
            - type: hidden
              name: description
              value: Techniques and strategies for resolving challenging customer situations.
            - type: list
              name: groups
              children:
                - type: hidden
                  value: Customer Support
  - slug: postInstallKnowledgeBasesCustom
    path: postInstall.knowledgeBases
    forms: [default]
    ui:
      type: repeater
      label: Knowledge Bases
      key: "$: 'knowledgeBases-' + $get(postInstallGroupsCustom).value.length"
      addButton: false
      insertControl: true
      upControl: false
      downControl: false
      help: The installation process will automatically create these knowledge bases. You can change the names & details anytime inside the application itself.
      children:
        - label: What are you working on?
          type: text
          name: name
          help: Name your knowledge base
          validation: required
        - label: What are you trying to achieve?
          type: text
          name: description
          help: Describe your knowledge base and objectives
          validation: required
        - label: Groups
          type: taglist
          name: groups
          key: "$: 'knowledgeBaseGroups-' + $get(postInstallGroupsCustom).value.length"
          options: $u.map($get(postInstallGroupsCustom).value, 'name')
          disableDragAndDrop: true
          allowNewValues: true
          popover: true
          openOnClick: true
          closeOnSelect: false
          help: Select groups with write access to this knowledge base

system:
  - path: open-webui.ingress.host
    value: 'chat.${system.hubCluster.ingressHostname}'

output:
  - name: Open Web UI URL
    description: The URL to access Open WebUI
    value: 'https://chat.${system.hubCluster.ingressHostname}'
    type: url
    slug: default

# old junk below
#forms:
#  - slug: default
#    label: 'Hello world app'
#    steps:
#      - slug: one
#        variableSlugs:
#          - hello
#        ui:
#          label: One
#      - slug: two
#        variableSlugs:
#          - item1
#        ui:
#          label: Two
#        isCreateOnly: true
#  - slug: foo
#    label: Foo Form
#    caption: A form caption
#    isFormOption: true
#  - slug: bar
#    label: Bar Form
#  - slug: baz
#    label: Baz Form
#    isFormOption: true
#    isCreateOnly: true
#
#variables:
#  - slug: 'hello'
#    path: 'hello'
#    forms: ['default']
#    ui:
#      type: 'text'
#      label: 'Hello'
#  - slug: 'bye'
#    path: 'bye'
#    forms: ['foo']
#    ui:
#      type: 'text'
#      label: 'Bye Foo'
#  - slug: 'bazzercise'
#    path: 'bazzercise'
#    forms: ['baz']
#    ui:
#      type: 'text'
#      label: 'Baz!'
#  - slug: 'item1'
#    path: 'item1'
#    forms: ['default']
#    ui:
#      type: 'radio'
#      label: 'Show item 2?'
#      options:
#        - label: Yes
#          value: true
#        - label: No
#          value: false
#      value: true
#  - slug: 'item2'
#    path: 'item2'
#    forms: ['default']
#    ui:
#      if: '$get(item1).value'
#      type: 'text'
#      label: 'Item 2'

